{%extends 'tvk/base_generic.html' %}

{% block content %}
    <div class='container-fluid'>
        <div class='row'>
            <form action="{% url 'report:contraventions'%}" method='POST' name='contr_form'>
                {% csrf_token %}
                {{form}}
            </form>
        </div>
        <div class="table-responsive">
            <table class="table table-striped table-bordered w-auto">
                <thead>
                    <th>‚Ññ</th>
                    <th>–°—É–±—ä–µ–∫—Ç</th>
                    <th>–û–±—ä–µ–∫—Ç</th>
                    <th>‚Ññ –æ—Ç—á–µ—Ç–∞</th>
                    <th>–î–∞—Ç–∞</th>
                    <th>–°-–ø–æ</th>
                    <th>–†–∏—Å–∫</th>
                    <th>–î–æ–∫—É–º–µ–Ω—Ç–æ–≤</th>
                    <th>–ù–∞—Ä—É—à–µ–Ω–∏–π</th>
                    <th>–ö—Ä–∞—Ç–∫–∞—è —Å—É—Ç—å</th>
                    <th>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</th>
                    <th></th>
                </thead>
                <tbody>
                    {% for i_rez in page_obj %}
                        <tr>
                            <td>{{i_rez.risk.id}}</td>
                            <td>{{i_rez.risk.imnss.number}}</td>
                            <td>{{i_rez.exam.obj.number}}</td>
                            <td>{{i_rez.risk.number}}</td>
                            <td>{{i_rez.risk.date_state|date:'d.m.Y'}}</td>
                            <td>{{i_rez.risk.date_from|date:'d.m.Y'}} - {{i_rez.risk.date_to|date:'d.m.Y'}}</td>
                            <td>{{i_rez.exam.risk.code}}</td>
                            <td>{{i_rez.exam.count_all}}</td>
                            <td>{{i_rez.exam.count_contravention}}</td>
                            <td>{{i_rez.exam.description}}</td>
                            <td>{% for i_dep in i_rez.risk.departments.all %}{{i_dep.name}}; {%endfor%}</td>
                            <td><a href="{%url 'tvk:view_cic' id=i_rez.risk.id%}">üîé</a></td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        {% block paginator %}
            <div class='pagination'>
                <span class='page-links'>
                    {% if page_obj.has_previous %}
                        <a href="{% url 'report:p_contraventions' page=page_obj.previous_page_number%}">–ü—Ä–µ–¥—ã–¥—É—â–∞—è</a>
                        {% endif %}
                        <span class="page-current">
                            –°—Ç—Ä–∞–Ω–∏—Ü–∞ {{page_obj.number}} –∏–∑ {{page_obj.paginator.num_pages}}.
                        </span>
                        {% if page_obj.has_next%}
                        <a href="{% url 'report:p_contraventions' page=page_obj.next_page_number%}">–°–ª–µ–¥—É—é—â–∞—è</a>
                    {% endif %}
                    {% for page_number in page_obj.paginator.page_range %}
                        <a
                            href="{% url 'report:p_contraventions' page=page_number%}"
                            class="{% if page_number == page_obj.number %}current{% endif %}"
                        >
                            {{page_number}}
                        </a>
                    {% endfor %}
                </span>
            </div>
        {% endblock %}

    </div>
{% endblock %}